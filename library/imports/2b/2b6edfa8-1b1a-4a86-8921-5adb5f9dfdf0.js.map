{"version":3,"sources":["assets/scripts/util.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["let handler_pool:handler[] = [];\nlet handler_pool_size = 10;\n\n//用于绑定回调函数this指针\nexport class handler\n{\n    private cb:Function;\n    private host:any;\n    private args:any[];\n\n    constructor(){}\n\n    init(cb:Function, host = null, ...args)\n    {\n        this.cb = cb;\n        this.host = host;\n        this.args = args;\n    }\n\n    exec(...extras)\n    {\n        this.cb.apply(this.host, this.args.concat(extras));\n    }\n}\n\nexport function gen_handler(cb:Function, host:any = null, ...args:any[]):handler\n{\n    let single_handler:handler = handler_pool.length < 0 ? handler_pool.pop(): new handler()\n    //这里要展开args, 否则会将args当数组传给wrapper, 导致其args参数变成2维数组[[]]\n    single_handler.init(cb, host, ...args);\n    return single_handler;\n}\n\nexport function strfmt(fmt:string, ...args:any[])\n{\n    return fmt.replace(/\\{(\\d+)\\}/g, (match:string, argIndex:number) => {\n        return args[argIndex] || match;\n    });\n}\n\nexport function extend(target, ...sources) {\n    for (var i = 0; i < sources.length; i += 1) {\n        var source = sources[i];\n        for (var key in source) {\n            if (source.hasOwnProperty(key)) {\n                target[key] = source[key];\n            }\n        }\n    }\n    return target;\n}\n\nexport function createBreathAction(node:cc.Node, min = 0.9, max = 1.1)\n{\n    const action = cc.repeatForever(cc.sequence(cc.scaleTo(0.6, max), cc.scaleTo(0.6, min)));\n    node.runAction(action);\n}\n\nexport function destroyBreathAction(node:cc.Node)\n{\n    node.stopAllActions();\n}\n\nexport function getRandom (n:number, m:number) {\n    var num = Math.floor(Math.random() * (m - n + 1) + n)\n    return num\n}\n\n/**\n * @desc 碰撞检测\n * @param pointA {object} A目标坐标、半径\n * @param pointB {object} B目标坐标、半径\n * @return {boolean} 是否重叠\n */\nfunction testOverlay (pointA, pointB,R:number) {\n\tconst xGap = Math.abs(pointA.x - pointB.x)\n\tconst yGap = Math.abs(pointA.y - pointB.y)\n\tconst distance = Math.sqrt(xGap * xGap + yGap * yGap)\n\tconst rGap = R*2\n\treturn distance >= rGap\n}\n\n/**\n * @desc 有效点检测\n * @param pointArr {array} 已有点坐标、半径集合数组\n * @param newPoint {object} 新点坐标、半径\n * @return {boolean} 新点是否有效\n */\nfunction testAvailable (pointArr, newPoint,R:number) {\n    let arr = Array.from(pointArr)\n    let aval = true\n    while(arr.length > 0) {\n      let lastPoint = arr.pop()\n      if (testOverlay(lastPoint, newPoint,R)) {\n        aval = false\n        break;\n      }\n    }\n    return aval\n}\n\nexport function randomMinus1To1(){\n    return (Math.random() - 0.5) * 2;\n}"]}